<!DOCTYPE html>
<style>
    table {
        width: 70%;
        border-collapse: collapse;
    }

    tr {
        height: 100px;
    }

    td {
        border: 1px solid black;
        background-color: antiquewhite;
        text-align: center;
        font-weight: bold;
    }
</style>

<script>
    function SetToken(str) {
        var operators = "+-*/()";
        var token = [];
        var number = "";
        if (str.charAt(0) != "-" && str.charAt(0) != "(" && operators.includes(str.charAt(0))) {
            return -1;
        }
        if (str.charAt(str.length - 1) != ")" && operators.includes(str.charAt(str.length - 1))) {
            return -1;
        }
        token = InsertTokens(operators, number, str);
    }

    function InsertTokens(operators, number, str) {
        var token = [];
        for (var i = 0; i < str.length; i++) {
            if (operators.includes(str.charAt(i))) {
                if (number != "") {
                    token.push(number);
                    number = "";
                }
                token.push(str.charAt(i));
            }
            else {
                number += str.charAt(i);
            }
        }
        if (number != "") {
            token.push(number);
        }
        Calculate(token);
        return token;
    }

    //todo: validate operations check

    function Calculate(token) {
        token = CalculateParantheses(token);
        //todo: calculate devide and multiply first
        var result = parseFloat(token[0]);
        for (var i = 2; i < token.length; i += 2) {
            var secondNum = parseFloat(token[i]);
            var operator = token[i - 1];
            switch (operator) {
                case '+':
                    result += secondNum;
                    break;
                case '-':
                    result -= secondNum;
                    break;
            }
        }
        return result;
    }

    function CalculateParantheses(token) {
        var newToken = [];
        var i = token.indexOf("(");
        if (i == -1) {
            return token;
        }
        var j = token.lastIndexOf(")");
        for (var k = i + 1; k < j; k++) {
            newToken.push(token[k]);
        }
        token[i] = Calculate(newToken);
        token.splice(i + 1, j - i);
        return token;
    }

    SetToken("5+56-44+(6+895.6+(6+5)+4)");
</script>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Calculator</title>
</head>
<body>
    <table>
        <tr>
            <td id="clear">C</td>
            <td id="startBrack">(</td>
            <td id="endBrack">)</td>
            <td id="add">+</td>
        </tr>
        <tr>
            <td id="1">1</td>
            <td id="2">2</td>
            <td id="3">3</td>
            <td id="minus">-</td>
        </tr>
        <tr>
            <td id="4">4</td>
            <td id="5">5</td>
            <td id="6">6</td>
            <td id="multi">x</td>
        </tr>
        <tr>
            <td id="7">7</td>
            <td id="8">8</td>
            <td id="9">9</td>
            <td id="devide">/</td>
        </tr>
        <tr>
            <td colspan="2" id="0">0</td>
            <td id="dot">.</td>
            <td id="equals">=</td>
        </tr>
    </table>
</body>
</html>